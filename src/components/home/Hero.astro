---
import HeroStatement from "./Statement.astro";
import Carousel from "../carousel/Carousel.tsx";
import { CAROUSEL_IMAGES } from "../../data/carousel";
import "../../styles/home.css";
import "../../styles/carousel.css";
import "../../styles/info-panel.css";
import { getImageMetadata } from "../../utils/exif";

const images = await Promise.all(
  CAROUSEL_IMAGES.map(async (img) => {
    const meta = await getImageMetadata(img.src);
    return {
      src: img.src,
      caption: (img as any).caption || meta?.photography?.description || '',
      metadata: meta || {}
    };
  })
);
---

<section class="home-hero">
  <!-- Fixed carousel layer -->
  <div class="hero-fixed">
    <Carousel images={images} client:load />
  </div>

  <!-- Curtain -->
  <HeroStatement />
</section>
