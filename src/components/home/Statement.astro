<p class="hero-statement">
The World of Mahesh Shantaram. Documentary Photographer and Data Scientist for the Public Good.
</p>

<script is:inline>
  (function() {
    function fitHeroStatement() {
      var el = document.querySelector('.hero-statement');
      if (!el) return;

      var text = el.textContent || '';
      var style = getComputedStyle(el);
      var paddingTop = parseFloat(style.paddingTop);
      var paddingBottom = parseFloat(style.paddingBottom);
      var paddingLeft = parseFloat(style.paddingLeft);
      var paddingRight = parseFloat(style.paddingRight);

      var availableWidth = window.innerWidth - paddingLeft - paddingRight;
      var availableHeight = window.innerHeight - paddingTop - paddingBottom;

      // Create a hidden measurement element
      var measure = document.createElement('div');
      measure.style.cssText =
        'position:absolute;visibility:hidden;white-space:pre-wrap;word-wrap:break-word;' +
        'font-family:"DM Sans",sans-serif;font-weight:700;text-align:center;' +
        'width:' + availableWidth + 'px;line-height:0.92;hyphens:auto;';
      measure.textContent = text;
      document.body.appendChild(measure);

      // Binary search for optimal font size
      var minSize = 10;
      var maxSize = 400;
      var optimalSize = minSize;

      while (maxSize - minSize > 1) {
        var testSize = Math.floor((minSize + maxSize) / 2);
        measure.style.fontSize = testSize + 'px';

        if (measure.scrollHeight <= availableHeight) {
          optimalSize = testSize;
          minSize = testSize;
        } else {
          maxSize = testSize;
        }
      }

      document.body.removeChild(measure);

      // Apply the optimal size
      el.style.setProperty('--hero-font-size', optimalSize + 'px');
      el.style.setProperty('--hero-line-height', '0.92');
    }

    // Run immediately (before first paint) to prevent CLS
    fitHeroStatement();

    // Re-run when web fonts finish loading (metrics may differ from system fallback)
    if (document.fonts && document.fonts.ready) {
      document.fonts.ready.then(fitHeroStatement);
    }

    window.addEventListener('resize', fitHeroStatement);
    window.addEventListener('orientationchange', function() {
      setTimeout(fitHeroStatement, 100);
    });
  })();
</script>
