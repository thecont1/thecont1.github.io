---
import SiteHeader from "../components/SiteHeader.astro";
import SiteFooter from "../components/SiteFooter.astro";
import HomeHero from "../components/home/Hero.astro";
import HomeProjects from "../components/home/Projects.astro";
import HomeAbout from "../components/home/About.astro";
import C2PAOverlay from "../components/ui/C2PAOverlay.astro";
import "../styles/home.css";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Mahesh Shantaram | visual artist, data scientist</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,600&family=Inter:wght@400;500;600&family=DM+Sans:wght@500;600&family=Lexend:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <canvas id="snow-canvas" aria-hidden="true"></canvas>
    <!-- Persistent navigation -->
    <SiteHeader />

    <main>
      <!-- ===================================== -->
      <!-- HERO: carousel + curtain -->
      <!-- ===================================== -->
      <HomeHero />

      <!-- Creates space for curtain lift -->
      <div class="scroll-runway"></div>

      <!-- Small pause before projects take over -->
      <div class="scroll-buffer"></div>

      <!-- ===================================== -->
      <!-- PROJECTS -->
      <!-- ===================================== -->
      <HomeProjects />

      <!-- ===================================== -->
      <!-- ABOUT ME -->
      <!-- ===================================== -->
      <HomeAbout />

      <!-- ===================================== -->
      <!-- CONTACT -->
      <!-- ===================================== -->
      <section id="contact" class="contact-section">
        <header class="projects-header">
          <h2 class="projects-title">Contact</h2>
        </header>
        
        <div class="contact-grid">
          <div class="whatsapp-box">
            <h3>Start a Conversation over WhatsApp</h3>
            <p class="wa-label">Type a message below and hit send to open a chat with me.</p>
            <form id="wa-form" class="wa-form">
              <textarea id="wa-message" rows="7" placeholder="Hey Mahesh, about that 500 bucks I owe you..."></textarea>
              <button type="submit" class="wa-btn">
                Send to WhatsApp
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 2L11 13" />
                  <path d="M22 2L15 22L11 13L2 9L22 2Z" />
                </svg>
              </button>
            </form>
          </div>

          <div class="contact-info">
            <p class="contact-intro">Get in touch to say hello.</p>
            <a href="mailto:ms@thecontrarian.in" class="email-link">ms@thecontrarian.in</a>
          </div>

        </div>
      </section>

      <!-- ===================================== -->
      <!-- FOOTER -->
      <!-- ===================================== -->
      <SiteFooter />
    </main>
    <C2PAOverlay />
    <script is:inline src="/textmode.js" defer></script>
    <script is:inline src="/curtain-scroll-fallback.js" defer></script>
    <script is:inline src="/snow.js" defer></script>
    <script>
      // WhatsApp Form Handler
      const form = document.getElementById('wa-form');
      const messageInput = document.getElementById('wa-message') as HTMLTextAreaElement;
      const PHONE_NUMBER = "919980129770";

      if (form && messageInput) {
        form.addEventListener('submit', (e) => {
          e.preventDefault();
          const text = encodeURIComponent(messageInput.value);
          if (!text) return;
          
          const url = `https://wa.me/${PHONE_NUMBER}?text=${text}`;
          window.open(url, '_blank');
        });
      }
    </script>
  </body>
</html>
